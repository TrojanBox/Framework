<script type="text/javascript" src="<?=WEB_APPLICATION_PUBLIC?>js/com.trojanbox.content.comlists.js"></script>
<?if (empty($this->commentLists)):?>
	<div style='width: 100%;height: 100px;text-align: center;line-height: 100px;font-size: 21px;'>暂无评论~~</div>
<?else:?>
<?$data = $this->commentLists;?>
<?function comments($data, $floor) {?>

	<?foreach ($data as $key => $value):?>
	<?$rand = rand(0, 100000000000)?>
	<div class='com-trojanbox-comment-content' id='ctcc-<?=$value['id']?>-<?=$rand?>'>
	<?if (!empty($value['_children'])):?>
		<?comments($value['_children'], $floor);?>
	<?endif;?>
		<div class='com-trojanbox-comment-content-author'>
			<span class='com-trojanbox-comment-user<?=$rand?>'><?=$value['user_name']?> <font style='font-weight: normal;'><?=date('Y-m-d H:i:s', strtotime($value['add_time']))?></font></span>
			<span class='com-trojanbox-comment-floor'><?=$floor-$value['_floor']+1?> 层</span>
		</div>
		<div class='com-trojanbox-commect-usercontinue'>
			<?=$value['content']?>
		</div>
		<div style='clear: both;'></div>
	</div>
	<?endforeach?>
<?}?>
<?function newComments($data) {?>
	<?foreach ($data as $key => $value):?>
	<?$rand = rand(0, 100000000000)?>
	<div class='com-trojanbox-comment-content' id='ctcc-<?=$value['id']?>-<?=$rand?>'>
		<?if (!empty($value['_children'])):?>
			<?comments($value['_children'], $value['_newfloor']);?>
		<?endif;?>
		<div class='com-trojanbox-comment-content-author'>
			<span class='com-trojanbox-comment-user<?=$rand?>'><?=$value['user_name']?> <font style='font-weight: normal;'><?=date('Y-m-d H:i:s', strtotime($value['add_time']))?></font></span>
			<span class='com-trojanbox-comment-floor'><?=$value['_newfloor']?> 层</span>
		</div>
		<div class='com-trojanbox-commect-usercontinue'>
			<?=$value['content']?>
		</div>
		<div style='clear: both;'></div>
	</div>
	<?endforeach;?>
<?}?>
<?newComments($data);?>
<?endif;?>